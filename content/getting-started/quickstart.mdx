# Quickstart

Get an agent registered, classified, and sending heartbeats within 5 minutes.

## Prerequisites

- Node.js 18+ (Node 22 recommended)
- npm or yarn

## 1. Install the SDK

```bash
npm install @provenonce/sdk
```

## 2. Register an agent

Registration creates agent identity in the Registry and returns API credentials.

```typescript
import { register } from '@provenonce/sdk';

const creds = await register('my-first-agent', {
  registryUrl: 'https://provenonce.io',
  // registrationSecret: 'xxx',  // Required on mainnet, optional on devnet
});

console.log('Agent hash:', creds.hash);
console.log('API key:', creds.api_key);

// SAVE these credentials — the API key cannot be retrieved later

// Optional: register with a Solana wallet for economic identity
// const creds = await register('my-org', {
//   registryUrl: 'https://provenonce.io',
//   walletModel: 'self-custody',
// });
// console.log('Wallet:', creds.wallet?.address);
```

## 3. Purchase a SIGIL

A SIGIL classifies your agent's identity and activates lineage proofs. Choose an identity class:

| Class | Purpose |
|-------|---------|
| `narrow_task` | Single-purpose agents (search, transform, fetch) |
| `autonomous` | Self-directed agents with goals |
| `orchestrator` | Agents that manage other agents |

```typescript
import { BeatAgent } from '@provenonce/sdk';

const agent = new BeatAgent({
  apiKey: creds.api_key,
  registryUrl: 'https://provenonce.io',
});

const sigil = await agent.purchaseSigil({
  identityClass: 'autonomous',
  paymentTx: 'devnet-skip', // Devnet bypasses payment verification
});

console.log('Identity class:', sigil.identity_class);
console.log('Lineage proof:', sigil.lineage_proof);
```

## 4. Send heartbeats

Heartbeats prove your agent is alive. Each heartbeat returns a fresh Ed25519-signed lineage proof valid for 24 hours.

```typescript
const result = await agent.heartbeat({
  paymentTx: 'devnet-skip', // Devnet bypasses payment verification
});

console.log('Lineage proof:', result.lineage_proof);
console.log('Proof expires:', result.proof_expires_at);
```

For long-running agents, use the autonomous heartbeat loop:

```typescript
agent.startHeartbeat(); // Sends heartbeats automatically

// ... do your agent work ...

agent.stopHeartbeat(); // Agent becomes stale over time — no penalty
```

## 5. Verify your agent

Check your agent's status and Passport (lineage proof):

```bash
curl https://provenonce.io/api/v1/verify/YOUR_AGENT_HASH
```

View the Certificate of Registration (or Agent Passport for SIGIL holders):

```
https://provenonce.io/certificate/YOUR_AGENT_HASH
```

Verify a Passport offline using the authority public key:

```typescript
import { BeatAgent } from '@provenonce/sdk';

// Fetch the authority key
const res = await fetch('https://provenonce.io/.well-known/provenonce-authority.json');
const { authority_public_key } = await res.json();

// Verify without contacting the server
const valid = BeatAgent.verifyProofLocally(proof, authority_public_key);
```

## 6. Refresh a proof

Lineage proofs expire after 24 hours. Refresh without sending a full heartbeat:

```typescript
const fresh = await agent.reissueProof({
  paymentTx: 'devnet-skip',
});

console.log('New proof:', fresh.lineage_proof);
console.log('Expires:', fresh.proof_expires_at);
```

## Next steps

- [Core concepts](/concepts/architecture) — understand the three-service architecture
- [Beat chain](/concepts/beat-chain) — how the VDF anchors work
- [Lineage & proofs](/concepts/lineage) — Ed25519-signed proofs and offline verification
- [Market staleness](/concepts/market-staleness) — what happens when heartbeats lapse
- [API reference](/api-reference/register) — full endpoint documentation
